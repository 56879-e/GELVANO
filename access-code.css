.access-code-popup { position: fixed; top:0; left:0; right:0; bottom:0; background: rgba(0,0,0,0.5); z-index: 9998; display:flex; align-items:center; justify-content:center; }
.access-code-popup .popup-content { background:#fff; padding:20px 24px; border-radius:12px; min-width:300px; max-width:90vw; box-shadow:0 8px 24px rgba(0,0,0,0.18); text-align:center; }
.access-code-popup .popup-content h2 { margin:0 0 12px 0; color:#e31837; }
.access-code-popup .popup-content .code-input { width:100%; padding:10px 12px; border:1px solid #ddd; border-radius:8px; outline:none; }
.access-code-popup .popup-content .verify-button { width:100%; margin-top:10px; background:#e31837; color:#fff; border:none; border-radius:8px; padding:10px 12px; cursor:pointer; }
.access-code-popup .popup-content .verify-button:disabled { opacity:0.7; cursor:not-allowed; }
.video-modal, .pdf-modal { display:none; }

/* أنماط أزرار المشاركة المحظورة */
.share-button-blocked {
    opacity: 0.6 !important;
    filter: grayscale(100%) !important;
    cursor: not-allowed !important;
    pointer-events: auto !important;
    position: relative !important;
}

.share-button-blocked::after {
    content: "🚫" !important;
    position: absolute !important;
    top: 50% !important;
    left: 50% !important;
    transform: translate(-50%, -50%) !important;
    font-size: 16px !important;
    z-index: 1000 !important;
    background: rgba(255, 0, 0, 0.8) !important;
    color: white !important;
    border-radius: 50% !important;
    width: 24px !important;
    height: 24px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
}

.share-button-blocked:hover {
    opacity: 0.8 !important;
    transform: none !important;
}

/* منع اختيار النص */
.no-select {
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    -ms-user-select: none !important;
    user-select: none !important;
    -webkit-touch-callout: none !important;
    -webkit-tap-highlight-color: transparent !important;
}

/* منع السحب والإفلات */
.no-drag {
    -webkit-user-drag: none !important;
    -khtml-user-drag: none !important;
    -moz-user-drag: none !important;
    -o-user-drag: none !important;
    user-drag: none !important;
}

/* رسالة تحذير المشاركة */
.share-warning {
    position: fixed !important;
    top: 20px !important;
    right: 20px !important;
    background: #ff4444 !important;
    color: white !important;
    padding: 12px 20px !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
    z-index: 10000 !important;
    font-family: 'Tajawal', sans-serif !important;
    font-size: 14px !important;
    animation: slideIn 0.3s ease-out !important;
}

@keyframes slideIn {
    from {
        transform: translateX(100%);
        opacity: 0;
    }
    to {
        transform: translateX(0);
        opacity: 1;
    }
}

@keyframes slideOut {
    from {
        transform: translateX(0);
        opacity: 1;
    }
    to {
        transform: translateX(100%);
        opacity: 0;
    }
}

/* إخفاء أزرار المشاركة في الفيديوهات المضمنة */
.video-modal iframe,
.pdf-modal iframe {
    pointer-events: auto !important;
}

/* منع التفاعل مع أزرار المشاركة في الفيديوهات */
.video-modal .share-button,
.pdf-modal .share-button,
.ytp-share-button,
.ytp-menuitem[aria-label*="Share"],
.ytp-menuitem[aria-label*="مشاركة"] {
    display: none !important;
    visibility: hidden !important;
    opacity: 0 !important;
    pointer-events: none !important;
}

/* Transparent overlays that block clicks on YouTube's top-left/top-right in-iframe controls
   These overlays are added dynamically by JS inside the .video-modal .video-modal-content
   They are invisible but intercept pointer events so controls like "share" / "watch later"
   and the channel title/profile badge cannot be clicked.
*/
.video-modal .video-modal-content { position: relative; }
.video-modal .video-overlay {
    position: absolute;
    z-index: 1; /* ensure above iframe (iframe has no z-index) but below the close button (z-index:2 inline) */
    background: transparent;
    pointer-events: auto;
}
.video-modal .video-overlay.top-left {
    top: 8px;
    left: 8px;
    width: 84px; /* adjust if needed */
    height: 44px;
}
.video-modal .video-overlay.top-right {
    top: 8px;
    right: 8px;
    width: 45%; /* covers the right portion where the title/profile usually appears */
    max-width: 560px;
    min-width: 140px;
    height: 48px;
}

/* On small screens make overlays a bit taller to cover touch targets */
@media (max-width: 600px) {
    .video-modal .video-overlay.top-left { width: 64px; height: 56px; }
    .video-modal .video-overlay.top-right { height: 56px; }
}

/* Smart overlay and calibration UI */
.video-smart-overlay {
    position: absolute;
    inset: 0; /* cover modal content */
    z-index: 3; /* above iframe but below close button which had z-index:2 inline; adjust if needed */
    pointer-events: auto;
}
.video-smart-overlay.blocked-flash {
    animation: blockedFlash 0.22s ease-in-out;
}
@keyframes blockedFlash {
    0% { box-shadow: 0 0 0 4px rgba(255,0,0,0.12) inset; }
    100% { box-shadow: none; }
}
.video-smart-overlay .debug-zone {
    position: absolute;
    background: rgba(255,0,0,0.18);
    border: 1px solid rgba(255,0,0,0.28);
    box-sizing: border-box;
    pointer-events: none;
}
.video-calibrate-panel {
    position: absolute;
    right: 12px;
    bottom: 12px;
    z-index: 5;
    display: flex;
    gap: 8px;
    align-items: center;
    background: rgba(0,0,0,0.6);
    padding: 8px 10px;
    border-radius: 8px;
    color: #fff;
    font-size: 13px;
}
.video-calibrate-panel button {
    background: #e31837;
    color: #fff;
    border: none;
    padding: 6px 8px;
    border-radius: 6px;
    cursor: pointer;
}
.video-calibrate-panel input[type="checkbox"] { margin-left: 6px; }

/* Make sure close button remains on top */
.video-modal .close-video-modal { z-index: 20 !important; }

